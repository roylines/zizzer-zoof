var app=angular.module("app",["ngRoute","services"]),services=angular.module("services",["ngResource"]);$(".ui.dropdown").dropdown(),app.config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,n){t.html5Mode(!0);for(var a=["settings"],i=0;i<a.length;++i){var r={title:"Zizzer-Zoof: "+a[i],templateUrl:"/partial/"+a[i],controller:a[i]};e.when("/"+a[i],r)}e.otherwise({title:"Zizzer-Zoof",templateUrl:"/partial/landing",controller:"landing"});var o=["$q",function(e){function t(e){return e}function n(t){var n=t.status;return 401==n?void(window.location="/"):e.reject(t)}return function(e){return e.then(t,n)}}];n.responseInterceptors.push(o)}]),app.run(["$location","$rootScope",function(e,t){t.$on("$routeChangeSuccess",function(e,n){t.title=n.title})}]),services.factory("Items",["$resource",function(e){return e("/api/1/items/:id")}]),services.factory("Users",["$resource",function(e){return e("/api/1/users/:name")}]),app.directive("fileInput",["$parse",function(){return{restrict:"EA",template:"<input class='hidden' type='file' name='image' accept='image/*' capture='camera' />",replace:!0,link:function(e,t,n){e.$watch("state",function(){"choose"==e.state&&(e.state="choosing",t[0].click())}),t.bind("change",function(t){e[n.onChange](t.target.files[0])})}}}]),app.directive("mainFooter",[function(){return{restrict:"E",templateUrl:"/partial/footer",replace:!0}}]),app.directive("map",[function(){return{restrict:"EA",template:"<div class='map'></div>",replace:!0,link:function(e,t){var n,a=function(){if(void 0!==e.center){var a=new google.maps.LatLng(e.center.lat,e.center.lng);if(n)n.setCenter(a);else{var i={zoom:15,center:a};n=new google.maps.Map(t[0],i)}}};e.$watch("center",a,!0)}}}]),app.directive("mainNavigation",[function(){return{restrict:"E",templateUrl:"/partial/nav",replace:!0}}]),app.controller("auth",["$scope","Users",function(e,t){e.me=t.get({name:"me"})}]),app.controller("landing",["$scope",function(e){e.me&&(e.nearby=[{title:"Double divan bed for sale with 4 integrated drawers.",image:"http://ecx.images-amazon.com/images/I/71wnFFuhBOL._SL1500_.jpg",price:10,status:"available",expires:(new Date).getTime()+2e5,location:"Didcot",distance:"20 miles"},{title:"Pine coffee table.",image:"http://ecx.images-amazon.com/images/I/41xAa7NzeiL.jpg",price:10,status:"available",expires:(new Date).getTime()+2e5,location:"Didcot",distance:"20 miles"},{title:"Oak effect dining room table and benches. Table 121x75cm. Benches 88x34x81height cm",image:"http://ecx.images-amazon.com/images/I/31O2LZoXZ0L.jpg",price:10,status:"offers",expires:(new Date).getTime()+2e5,location:"Didcot",distance:"20 miles"}])}]),app.controller("selling",["$scope","Items",function(e,t){e.state="idle",e.choose=function(){e.state="choose"},e.chosen=function(t){var n=new FileReader;n.onloadend=function(){e.$apply(function(){e.newImage=n.result,e.state="chosen"})},n.readAsDataURL(t)},e.forSale=t.query({status:"selling"})}]),app.controller("settings",["$scope",function(){}]);